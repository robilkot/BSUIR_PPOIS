# Лабораторная работа 4

## Описание приложения

Система представляет из себя приложение клиент-сервер для осуществления операций над банками и кредитными картами. Посредством веб-интерфейса происходит взаимодействие с бизнес-логикой из ЛР1. 

![image](https://github.com/robilkot/BSUIR_PPOIS/assets/82116328/8a360077-9bdd-4e96-8dc4-20d3c399f387)

## Демонстрация работы

### Список банков

![image](https://github.com/robilkot/BSUIR_PPOIS/assets/82116328/f32c1507-5f03-4e99-b381-130efc020a1a)

/banks

На главной странице пользователю предложено выбрать банк из списка доступных, либо же создать новый

### Создание банка

![image](https://github.com/robilkot/BSUIR_PPOIS/assets/82116328/266875cb-f062-4571-9e70-194c3abec14d)

/banks/create

Для создания банка необходимо ввести его название

### Просмотр банка

![image](https://github.com/robilkot/BSUIR_PPOIS/assets/82116328/92ad5a58-3624-4feb-87f6-1bf22d5d4161)

/banks/BelInvestBank

На странице информации о банке можно увидеть список карт, которые он обслуживает, включая их номера, владельцев и статус.
Также возможно добавить новую карту либо удалить банк

### Создание карты

![image](https://github.com/robilkot/BSUIR_PPOIS/assets/82116328/16c6c17f-3338-45a9-9c72-b8fa3ed84e90)

/banks/BelInvestBank/cards/create

Для создания карты необходимо ввести её номер и пин-код

### Ошибочные ситуации

![image](https://github.com/robilkot/BSUIR_PPOIS/assets/82116328/f19bdbf6-2207-44f6-ab37-e319c7f6558c)

В случае возникновения ошибки, неправильного ввода и прочего, пользователь перенаправлен на специальную страницу с пояснением проблемы.
Так, на скриншоте показана попытка создания карты с уже занятым номером в пределах одного банка.

### Операции над картой

![image](https://github.com/robilkot/BSUIR_PPOIS/assets/82116328/de93173e-0ec9-4cd4-94a7-cb4ecbb55176)

/banks/BelInvestBank/cards/1234

Пользователю предлагается произвести следующие операции над картой:
- просмотр баланса
- зачисление денег на счёт
- снятие денег со счёта
- перевод денег на другую карту
- установка лимита по платежу
- смена пин-кода
- блокировка/разблокировка

Также можно удалить карту

### Операция перевода

![image](https://github.com/robilkot/BSUIR_PPOIS/assets/82116328/ef6fb693-6917-4214-8c5c-963bdc5bf5a2)

/banks/BelInvestBank/cards/1234/transfer

Внешний вид окна перевода показан на скриншоте. Требуется ввести сумму, номер карты получателя и пин-код от текущей карты.
Аналогично пин-код нужно вводить для всех операций, которые предусматривают получение информации о балансе и списании средств.
В случае трёхкратного неверно введённого пин-кода карта блокируется, операции становятся невозможными.

## Архитектура приложения

### Общие характеристики

В приложении используется фреймворк FastAPI для работы веб-сервера.
Приложение разработано с использованием паттерна MVC.

Фреймворк FastAPI был выбран за скорость работы, быстроту развёртывания готового приложения и поддержку асинхронных операций (полезно для потенциального развития системы, хотя в данной версии не применяется)

![image](https://github.com/robilkot/BSUIR_PPOIS/assets/82116328/024854e5-d4a6-47b4-b035-68ceafbb55af)

Слой model содержит в себе сущности разработанной предметной области, а также класс ServiceProvider для получения необходимых сервисов.
Основным сервисом является FinancesService, который в неизменённом виде используется из ЛР1. Аналогично взят и FileRepository для хранения состояния системы в файле wannabe-db.pickle.

Слой controller представлен роутерами FastAPI. Этот слой отвечает за обработку запросов клиентов, валидацию и обработку исключений с последующим возвратом необходимых view пользователю.

Слой view представлен html-шаблонами Jinja2-templates, которые служат для генерации view по шаблону на основе данных, полученных из бекенда приложения.

Для создания графического интерфейса использован HTML, CSS, а также в незначительной степени Javascript для выполнения AJAX-запросов и перенаправления пользователя на другие страницы.
